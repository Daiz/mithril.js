(function(){function y(b,d,g,f,h,m){return{tag:b,key:d,attrs:g,children:f,text:h,dom:m,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function N(b){for(var d in b)if(D.call(b,d))return!1;return!0}function A(b){var d=arguments[1],g=2;if(null==b||"string"!==typeof b&&"function"!==typeof b&&"function"!==typeof b.view)throw Error("The selector must be either a string or a component.");if("string"===typeof b){var f;if(!(f=O[b])){var h="div";for(var m=[],n={};f=R.exec(b);){var p=
f[1],t=f[2];""===p&&""!==t?h=t:"#"===p?n.id=t:"."===p?m.push(t):"["===f[3][0]&&((p=f[6])&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===f[4]?m.push(p):n[f[4]]=""===p?p:p||!0)}0<m.length&&(n.className=m.join(" "));f=O[b]={tag:h,attrs:n}}}if(null==d)d={};else if("object"!==typeof d||null!=d.tag||Array.isArray(d))d={},g=1;if(arguments.length===g+1)h=arguments[g],Array.isArray(h)||(h=[h]);else for(h=[];g<arguments.length;)h.push(arguments[g++]);g=y.normalizeChildren(h);if("string"===
typeof b){h=!1;var q,l;m=d.className||d["class"];if(!N(f.attrs)&&!N(d)){n={};for(var a in d)D.call(d,a)&&(n[a]=d[a]);d=n}for(a in f.attrs)D.call(f.attrs,a)&&(d[a]=f.attrs[a]);void 0!==m&&(void 0!==d["class"]&&(d["class"]=void 0,d.className=m),null!=f.attrs.className&&(d.className=f.attrs.className+" "+m));for(a in d)if(D.call(d,a)&&"key"!==a){h=!0;break}Array.isArray(g)&&1===g.length&&null!=g[0]&&"#"===g[0].tag?l=g[0].children:q=g;return y(f.tag,d.key,h?d:void 0,q,l)}return y(b,d.key,d,g)}function S(b){var d=
0,g=null,f="function"===typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var h=Date.now();0===d||16<=h-d?(d=h,b()):null===g&&(g=f(function(){g=null;b();d=Date.now()},16-(h-d)))}}y.normalize=function(b){return Array.isArray(b)?y("[",void 0,void 0,y.normalizeChildren(b),void 0,void 0):null!=b&&"object"!==typeof b?y("#",void 0,void 0,!1===b?"":b,void 0,void 0):b};y.normalizeChildren=function(b){for(var d=0;d<b.length;d++)b[d]=y.normalize(b[d]);return b};var R=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,
O={},D={}.hasOwnProperty;A.trust=function(b){null==b&&(b="");return y("<",void 0,void 0,b,void 0,void 0)};A.fragment=function(b,d){return y("[",b.key,b,y.normalizeChildren(d),void 0,void 0)};var u=function(b){function d(b,a){return function G(d){var l;try{if(!a||null==d||"object"!==typeof d&&"function"!==typeof d||"function"!==typeof(l=d.then))q(function(){a||0!==b.length||console.error("Possible unhandled promise rejection:",d);for(var f=0;f<b.length;f++)b[f](d);h.length=0;m.length=0;t.state=a;t.retry=
function(){G(d)}});else{if(d===f)throw new TypeError("Promise can't be resolved w/ itself");g(l.bind(d))}}catch(T){p(T)}}}function g(b){function a(a){return function(b){0<d++||a(b)}}var d=0,f=a(p);try{b(a(n),f)}catch(G){f(G)}}if(!(this instanceof u))throw Error("Promise must be called with `new`");if("function"!==typeof b)throw new TypeError("executor must be a function");var f=this,h=[],m=[],n=d(h,!0),p=d(m,!1),t=f._instance={resolvers:h,rejectors:m},q="function"===typeof setImmediate?setImmediate:
setTimeout;g(b)};u.prototype.then=function(b,d){function g(b,d,g,l){d.push(function(a){if("function"!==typeof b)g(a);else try{h(b(a))}catch(x){m&&m(x)}});"function"===typeof f.retry&&l===f.state&&f.retry()}var f=this._instance,h,m,n=new u(function(b,d){h=b;m=d});g(b,f.resolvers,h,!0);g(d,f.rejectors,m,!1);return n};u.prototype["catch"]=function(b){return this.then(null,b)};u.resolve=function(b){return b instanceof u?b:new u(function(d){d(b)})};u.reject=function(b){return new u(function(d,g){g(b)})};
u.all=function(b){return new u(function(d,g){var f=b.length,h=0,m=[];if(0===b.length)d([]);else for(var n=0;n<b.length;n++)(function(p){function t(b){h++;m[p]=b;h===f&&d(m)}null==b[p]||"object"!==typeof b[p]&&"function"!==typeof b[p]||"function"!==typeof b[p].then?t(b[p]):b[p].then(t,g)})(n)})};u.race=function(b){return new u(function(d,g){for(var f=0;f<b.length;f++)b[f].then(d,g)})};"undefined"!==typeof window?("undefined"===typeof window.Promise&&(window.Promise=u),u=window.Promise):"undefined"!==
typeof global&&("undefined"===typeof global.Promise&&(global.Promise=u),u=global.Promise);var H=function(b){function d(b,f){if(Array.isArray(f))for(var h=0;h<f.length;h++)d(b+"["+h+"]",f[h]);else if("[object Object]"===Object.prototype.toString.call(f))for(h in f)d(b+"["+h+"]",f[h]);else g.push(encodeURIComponent(b)+(null!=f&&""!==f?"="+encodeURIComponent(f):""))}if("[object Object]"!==Object.prototype.toString.call(b))return"";var g=[],f;for(f in b)d(f,b[f]);return g.join("&")},U=/^file:\/\//i,L=
function(b,d){function g(){function a(){0===--b&&"function"===typeof l&&l()}var b=0;return function B(d){var f=d.then;d.then=function(){b++;var h=f.apply(d,arguments);h.then(a,function(d){a();if(0===b)throw d;});return B(h)};return d}}function f(a,b){if("string"===typeof a){var d=a;a=b||{};null==a.url&&(a.url=d)}return a}function h(a,b){if(null==b)return a;for(var d=a.match(/:[^\/]+/gi)||[],f=0;f<d.length;f++){var h=d[f].slice(1);null!=b[h]&&(a=a.replace(d[f],b[h]))}return a}function m(a,b){var d=
H(b);if(""!==d){var f=0>a.indexOf("?")?"?":"&";a+=f+d}return a}function n(a){try{return""!==a?JSON.parse(a):null}catch(x){throw Error(a);}}function p(a){return a.responseText}function t(a,b){if("function"===typeof a)if(Array.isArray(b))for(var d=0;d<b.length;d++)b[d]=new a(b[d]);else return new a(b);return b}var q=0,l;return{request:function(a,l){var q=g();a=f(a,l);var x=new d(function(d,f){null==a.method&&(a.method="GET");a.method=a.method.toUpperCase();var g="GET"===a.method||"TRACE"===a.method?
!1:"boolean"===typeof a.useBody?a.useBody:!0;"function"!==typeof a.serialize&&(a.serialize="undefined"!==typeof FormData&&a.data instanceof FormData?function(a){return a}:JSON.stringify);"function"!==typeof a.deserialize&&(a.deserialize=n);"function"!==typeof a.extract&&(a.extract=p);a.url=h(a.url,a.data);g?a.data=a.serialize(a.data):a.url=m(a.url,a.data);var l=new b.XMLHttpRequest,q=!1,x=l.abort;l.abort=function(){q=!0;x.call(l)};l.open(a.method,a.url,"boolean"===typeof a.async?a.async:!0,"string"===
typeof a.user?a.user:void 0,"string"===typeof a.password?a.password:void 0);a.serialize!==JSON.stringify||!g||a.headers&&a.headers.hasOwnProperty("Content-Type")||l.setRequestHeader("Content-Type","application/json; charset=utf-8");a.deserialize!==n||a.headers&&a.headers.hasOwnProperty("Accept")||l.setRequestHeader("Accept","application/json, text/*");a.withCredentials&&(l.withCredentials=a.withCredentials);for(var B in a.headers)({}).hasOwnProperty.call(a.headers,B)&&l.setRequestHeader(B,a.headers[B]);
"function"===typeof a.config&&(l=a.config(l,a)||l);l.onreadystatechange=function(){if(!q&&4===l.readyState)try{var b=a.extract!==p?a.extract(l,a):a.deserialize(a.extract(l,a));if(200<=l.status&&300>l.status||304===l.status||U.test(a.url))d(t(a.type,b));else{var h=Error(l.responseText),g;for(g in b)h[g]=b[g];f(h)}}catch(k){f(k)}};g&&null!=a.data?l.send(a.data):l.send()});return!0===a.background?x:q(x)},jsonp:function(a,l){var p=g();a=f(a,l);var n=new d(function(d,f){var l=a.callbackName||"_mithril_"+
Math.round(1E16*Math.random())+"_"+q++,g=b.document.createElement("script");b[l]=function(f){g.parentNode.removeChild(g);d(t(a.type,f));delete b[l]};g.onerror=function(){g.parentNode.removeChild(g);f(Error("JSONP request failed"));delete b[l]};null==a.data&&(a.data={});a.url=h(a.url,a.data);a.data[a.callbackKey||"callback"]=l;g.src=m(a.url,a.data);b.document.documentElement.appendChild(g)});return!0===a.background?n:p(n)},setCompletionCallback:function(a){l=a}}}(window,u),Q=function(b){function d(){try{return C.activeElement}catch(k){return null}}
function g(k,c,e,a,b,d,g){for(;e<a;e++){var h=c[e];null!=h&&f(k,h,b,g,d)}}function f(k,c,e,b,d){var v=c.tag;if("string"===typeof v)switch(c.state={},null!=c.attrs&&J(c.attrs,c,e),v){case "#":return c.dom=C.createTextNode(c.children),l(k,c.dom,d),c.dom;case "<":return h(k,c,d);case "[":var t=C.createDocumentFragment();null!=c.children&&(v=c.children,g(t,v,0,v.length,e,null,b));c.dom=t.firstChild;c.domSize=t.childNodes.length;l(k,t,d);return t;default:var p=c.tag,r=(v=c.attrs)&&v.is;p=(b=c.attrs&&c.attrs.xmlns||
H[c.tag]||b)?r?C.createElementNS(b,p,{is:r}):C.createElementNS(b,p):r?C.createElement(p,{is:r}):C.createElement(p);c.dom=p;if(null!=v)for(t in r=b,v)B(c,t,null,v[t],r);l(k,p,d);null!=c.attrs&&null!=c.attrs.contenteditable?a(c):(null!=c.text&&(""!==c.text?p.textContent=c.text:c.children=[y("#",void 0,void 0,c.text,void 0,void 0)]),null!=c.children&&(k=c.children,g(p,k,0,k.length,e,null,b),k=c.attrs,"select"===c.tag&&null!=k&&("value"in k&&B(c,"value",null,k.value,void 0),"selectedIndex"in k&&B(c,"selectedIndex",
null,k.selectedIndex,void 0))));return p}else return m(c,e),null!=c.instance?(e=f(k,c.instance,e,b,d),c.dom=c.instance.dom,c.domSize=null!=c.dom?c.instance.domSize:0,l(k,e,d),c=e):(c.domSize=0,c=D),c}function h(k,c,e){var a={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[(c.children.match(/^\s*?<(\w+)/im)||[])[1]]||"div";a=C.createElement(a);a.innerHTML=c.children;c.dom=a.firstChild;c.domSize=a.childNodes.length;c=C.createDocumentFragment();
for(var b;b=a.firstChild;)c.appendChild(b);l(k,c,e);return c}function m(k,c){if("function"===typeof k.tag.view){k.state=Object.create(k.tag);var e=k.state.view;if(null!=e.$$reentrantLock$$)return D;e.$$reentrantLock$$=!0}else{k.state=void 0;e=k.tag;if(null!=e.$$reentrantLock$$)return D;e.$$reentrantLock$$=!0;k.state=null!=k.tag.prototype&&"function"===typeof k.tag.prototype.view?new k.tag(k):k.tag(k)}k._state=k.state;null!=k.attrs&&J(k.attrs,k,c);J(k._state,k,c);k.instance=y.normalize(k._state.view.call(k.state,
k));if(k.instance===k)throw Error("A view cannot return the vnode it received as argument");e.$$reentrantLock$$=null}function n(k,c,e,a,b,d,h){if(c!==e&&(null!=c||null!=e))if(null==c)g(k,e,0,e.length,b,d,h);else if(null==e)x(c,0,c.length,e);else{if(c.length===e.length){for(var v=!1,r=0;r<e.length;r++)if(null!=e[r]&&null!=c[r]){v=null==e[r].key&&null==c[r].key;break}if(v){for(r=0;r<c.length;r++)c[r]!==e[r]&&(null==c[r]&&null!=e[r]?f(k,e[r],b,h,q(c,r+1,d)):null==e[r]?x(c,r,r+1,e):p(k,c[r],e[r],b,q(c,
r+1,d),a,h));return}}if(!a)a:{if(null!=c.pool&&Math.abs(c.pool.length-e.length)<=Math.abs(c.length-e.length)&&(a=e[0]&&e[0].children&&e[0].children.length||0,Math.abs((c.pool[0]&&c.pool[0].children&&c.pool[0].children.length||0)-a)<=Math.abs((c[0]&&c[0].children&&c[0].children.length||0)-a))){a=!0;break a}a=!1}if(a){var m=c.pool;c=c.concat(c.pool)}r=v=0;for(var n=c.length-1,E=e.length-1,B;n>=v&&E>=r;){var w=c[v],z=e[r];if(w!==z||a)if(null==w)v++;else if(null==z)r++;else if(w.key===z.key){var u=null!=
m&&v>=c.length-m.length||null==m&&a;v++;r++;p(k,w,z,b,q(c,v,d),u,h);a&&w.tag===z.tag&&l(k,t(w),d)}else if(w=c[n],w!==z||a)if(null==w)n--;else if(null==z)r++;else if(w.key===z.key)u=null!=m&&n>=c.length-m.length||null==m&&a,p(k,w,z,b,q(c,n+1,d),u,h),(a||r<E)&&l(k,t(w),q(c,v,d)),n--,r++;else break;else n--,r++;else v++,r++}for(;n>=v&&E>=r;){w=c[n];z=e[E];if(w!==z||a)if(null==w)n--;else{if(null!=z)if(w.key===z.key)u=null!=m&&n>=c.length-m.length||null==m&&a,p(k,w,z,b,q(c,n+1,d),u,h),a&&w.tag===z.tag&&
l(k,t(w),d),null!=w.dom&&(d=w.dom),n--;else{if(!B){B=c;w=n;u={};var I;for(I=0;I<w;I++){var y=B[I];null!=y&&(y=y.key,null!=y&&(u[y]=I))}B=u}null!=z&&(w=B[z.key],null!=w?(u=c[w],p(k,u,z,b,q(c,n+1,d),a,h),l(k,t(u),d),c[w].skip=!0,null!=u.dom&&(d=u.dom)):d=f(k,z,b,h,d))}E--}else n--,E--;if(E<r)break}g(k,e,r,E+1,b,d,h);x(c,v,n+1,e)}}function p(k,c,e,b,d,g,l){var v=c.tag;if(v===e.tag){e.state=c.state;e._state=c._state;e.events=c.events;var r;if(r=!g){var q,w;null!=e.attrs&&"function"===typeof e.attrs.onbeforeupdate&&
(q=e.attrs.onbeforeupdate.call(e.state,e,c));"string"!==typeof e.tag&&"function"===typeof e._state.onbeforeupdate&&(w=e._state.onbeforeupdate.call(e.state,e,c));void 0===q&&void 0===w||q||w?r=!1:(e.dom=c.dom,e.domSize=c.domSize,e.instance=c.instance,r=!0)}if(!r)if("string"===typeof v)switch(null!=e.attrs&&(g?(e.state={},J(e.attrs,e,b)):K(e.attrs,e,b)),v){case "#":c.children.toString()!==e.children.toString()&&(c.dom.nodeValue=e.children);e.dom=c.dom;break;case "<":c.children!==e.children?(t(c),h(k,
e,d)):(e.dom=c.dom,e.domSize=c.domSize);break;case "[":n(k,c.children,e.children,g,b,d,l);c=0;b=e.children;e.dom=null;if(null!=b){for(g=0;g<b.length;g++){var x=b[g];null!=x&&null!=x.dom&&(null==e.dom&&(e.dom=x.dom),c+=x.domSize||1)}1!==c&&(e.domSize=c)}break;default:k=e.dom=c.dom;l=e.attrs&&e.attrs.xmlns||H[e.tag]||l;"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0));d=c.attrs;v=e.attrs;r=l;if(null!=v)for(x in v)B(e,x,d&&d[x],v[x],r);if(null!=d)for(x in d)null!=
v&&x in v||("className"===x&&(x="class"),"o"!==x[0]||"n"!==x[1]||u(x)?"key"!==x&&e.dom.removeAttribute(x):P(e,x,void 0));null!=e.attrs&&null!=e.attrs.contenteditable?a(e):null!=c.text&&null!=e.text&&""!==e.text?c.text.toString()!==e.text.toString()&&(c.dom.firstChild.nodeValue=e.text):(null!=c.text&&(c.children=[y("#",void 0,void 0,c.text,void 0,c.dom.firstChild)]),null!=e.text&&(e.children=[y("#",void 0,void 0,e.text,void 0,void 0)]),n(k,c.children,e.children,g,b,null,l))}else{if(g)m(e,b);else{e.instance=
y.normalize(e._state.view.call(e.state,e));if(e.instance===e)throw Error("A view cannot return the vnode it received as argument");null!=e.attrs&&K(e.attrs,e,b);K(e._state,e,b)}null!=e.instance?(null==c.instance?f(k,e.instance,b,l,d):p(k,c.instance,e.instance,b,d,g,l),e.dom=e.instance.dom,e.domSize=e.instance.domSize):null!=c.instance?(z(c.instance,null),e.dom=void 0,e.domSize=0):(e.dom=c.dom,e.domSize=c.domSize)}}else z(c,null),f(k,e,b,l,d)}function t(k){var c=k.domSize;if(null!=c||null==k.dom){var a=
C.createDocumentFragment();if(0<c){for(k=k.dom;--c;)a.appendChild(k.nextSibling);a.insertBefore(k,a.firstChild)}return a}return k.dom}function q(k,c,a){for(;c<k.length;c++)if(null!=k[c]&&null!=k[c].dom)return k[c].dom;return a}function l(k,c,a){a&&a.parentNode?k.insertBefore(c,a):k.appendChild(c)}function a(a){var c=a.children;if(null!=c&&1===c.length&&"<"===c[0].tag)c=c[0].children,a.dom.innerHTML!==c&&(a.dom.innerHTML=c);else if(null!=a.text||null!=c&&0!==c.length)throw Error("Child node of a contenteditable must be trusted");
}function x(a,c,b,d){for(;c<b;c++){var k=a[c];null!=k&&(k.skip?k.skip=!1:z(k,d))}}function z(a,c){function b(){if(++d===k&&(G(a),a.dom)){var b=a.domSize||1;if(1<b)for(var e=a.dom;--b;){var f=e.nextSibling,g=f.parentNode;null!=g&&g.removeChild(f)}b=a.dom;e=b.parentNode;null!=e&&e.removeChild(b);if(b=null!=c&&null==a.domSize)b=a.attrs,b=!(null!=b&&(b.oncreate||b.onupdate||b.onbeforeremove||b.onremove));b&&"string"===typeof a.tag&&(c.pool?c.pool.push(a):c.pool=[a])}}var k=1,d=0;if(a.attrs&&"function"===
typeof a.attrs.onbeforeremove){var f=a.attrs.onbeforeremove.call(a.state,a);null!=f&&"function"===typeof f.then&&(k++,f.then(b,b))}"string"!==typeof a.tag&&"function"===typeof a._state.onbeforeremove&&(f=a._state.onbeforeremove.call(a.state,a),null!=f&&"function"===typeof f.then&&(k++,f.then(b,b)));b()}function G(a){a.attrs&&"function"===typeof a.attrs.onremove&&a.attrs.onremove.call(a.state,a);if("string"!==typeof a.tag)"function"===typeof a._state.onremove&&a._state.onremove.call(a.state,a),null!=
a.instance&&G(a.instance);else if(a=a.children,Array.isArray(a))for(var c=0;c<a.length;c++){var b=a[c];null!=b&&G(b)}}function B(a,c,b,f,g){var e=a.dom;if("key"!==c&&"is"!==c&&(b!==f||"value"===c||"checked"===c||"selectedIndex"===c||"selected"===c&&a.dom===d()||"object"===typeof f)&&"undefined"!==typeof f&&!u(c)){var k=c.indexOf(":");if(-1<k&&"xlink"===c.substr(0,k))e.setAttributeNS("http://www.w3.org/1999/xlink",c.slice(k+1),f);else if("o"===c[0]&&"n"===c[1]&&"function"===typeof f)P(a,c,f);else if("style"===
c)if(a=b,a===f&&(e.style.cssText="",a=null),null==f)e.style.cssText="";else if("string"===typeof f)e.style.cssText=f;else{"string"===typeof a&&(e.style.cssText="");for(var h in f)e.style[h]=f[h];if(null!=a&&"string"!==typeof a)for(h in a)h in f||(e.style[h]="")}else if(c in e&&"href"!==c&&"list"!==c&&"form"!==c&&"width"!==c&&"height"!==c&&void 0===g&&!(a.attrs.is||-1<a.tag.indexOf("-"))){if("value"===c){h=""+f;if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===h&&a.dom===d())return;if("select"===
a.tag)if(null===f){if(-1===a.dom.selectedIndex&&a.dom===d())return}else if(null!==b&&a.dom.value===h&&a.dom===d())return;if("option"===a.tag&&null!=b&&a.dom.value===h)return}"input"===a.tag&&"type"===c?e.setAttribute(c,f):e[c]=f}else"boolean"===typeof f?f?e.setAttribute(c,""):e.removeAttribute(c):e.setAttribute("className"===c?"class":c,f)}}function u(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function A(){}function P(a,c,b){null!=
a.events?a.events[c]!==b&&(null==b||"function"!==typeof b&&"object"!==typeof b?(null!=a.events[c]&&a.dom.removeEventListener(c.slice(2),a.events,!1),a.events[c]=void 0):(null==a.events[c]&&a.dom.addEventListener(c.slice(2),a.events,!1),a.events[c]=b)):null==b||"function"!==typeof b&&"object"!==typeof b||(a.events=new A,a.dom.addEventListener(c.slice(2),a.events,!1),a.events[c]=b)}function J(a,c,b){"function"===typeof a.oninit&&a.oninit.call(c.state,c);"function"===typeof a.oncreate&&b.push(a.oncreate.bind(c.state,
c))}function K(a,c,b){"function"===typeof a.onupdate&&b.push(a.onupdate.bind(c.state,c))}var C=b.document,D=C.createDocumentFragment(),H={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},F;A.prototype=Object.create(null);A.prototype.handleEvent=function(a){var b=this["on"+a.type],d;"function"===typeof b?d=b.call(a.target,a):"function"===typeof b.handleEvent&&b.handleEvent(a);"function"===typeof F&&F.call(a.target,a);!1===d&&(a.preventDefault(),a.stopPropagation())};return{render:function(a,
b){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var c=[],f=d(),h=a.namespaceURI;null==a.vnodes&&(a.textContent="");Array.isArray(b)||(b=[b]);n(a,a.vnodes,y.normalizeChildren(b),!1,c,null,"http://www.w3.org/1999/xhtml"===h?void 0:h);a.vnodes=b;null!=f&&d()!==f&&f.focus();for(f=0;f<c.length;f++)c[f]()},setEventCallback:function(a){return F=a}}},F=function(b){function d(b){b=f.indexOf(b);-1<b&&f.splice(b,2)}function g(){for(var b=1;b<f.length;b+=
2)f[b]()}b=Q(b);b.setEventCallback(function(b){!1===b.redraw?b.redraw=void 0:g()});var f=[];return{subscribe:function(b,g){d(b);f.push(b,S(g))},unsubscribe:d,redraw:g,render:b.render}}(window);L.setCompletionCallback(F.redraw);A.mount=function(b){return function(d,g){if(null===g)b.render(d,[]),b.unsubscribe(d);else{if(null==g.view&&"function"!==typeof g)throw Error("m.mount(element, component) expects a component, not a vnode");b.subscribe(d,function(){b.render(d,y(g))});b.redraw()}}}(F);var V=u,
M=function(b){if(""===b||null==b)return{};"?"===b.charAt(0)&&(b=b.slice(1));b=b.split("&");for(var d={},g={},f=0;f<b.length;f++){var h=b[f].split("="),m=decodeURIComponent(h[0]);h=2===h.length?decodeURIComponent(h[1]):"";"true"===h?h=!0:"false"===h&&(h=!1);var n=m.split(/\]\[?|\[/),p=d;-1<m.indexOf("[")&&n.pop();for(var t=0;t<n.length;t++){m=n[t];var q=n[t+1];q=""==q||!isNaN(parseInt(q,10));var l=t===n.length-1;""===m&&(m=n.slice(0,t).join(),null==g[m]&&(g[m]=0),m=g[m]++);null==p[m]&&(p[m]=l?h:q?
[]:{});p=p[m]}}return d},W=function(b){function d(d){var f=b.location[d].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);"pathname"===d&&"/"!==f[0]&&(f="/"+f);return f}function g(b){return function(){null==n&&(n=m(function(){n=null;b()}))}}function f(b,d,f){var a=b.indexOf("?"),g=b.indexOf("#"),h=-1<a?a:-1<g?g:b.length;if(-1<a){a=M(b.slice(a+1,-1<g?g:b.length));for(var l in a)d[l]=a[l]}if(-1<g)for(l in d=M(b.slice(g+1)),d)f[l]=d[l];return b.slice(0,h)}var h="function"===typeof b.history.pushState,
m="function"===typeof setImmediate?setImmediate:setTimeout,n,p={prefix:"#!",getPath:function(){switch(p.prefix.charAt(0)){case "#":return d("hash").slice(p.prefix.length);case "?":return d("search").slice(p.prefix.length)+d("hash");default:return d("pathname").slice(p.prefix.length)+d("search")+d("hash")}},setPath:function(d,g,l){var a={},n={};d=f(d,a,n);if(null!=g){for(var m in g)a[m]=g[m];d=d.replace(/:([^\/]+)/g,function(b,d){delete a[d];return g[d]})}(m=H(a))&&(d+="?"+m);(n=H(n))&&(d+="#"+n);
h?(n=l?l.state:null,m=l?l.title:null,b.onpopstate(),l&&l.replace?b.history.replaceState(n,m,p.prefix+d):b.history.pushState(n,m,p.prefix+d)):b.location.href=p.prefix+d},defineRoutes:function(d,n,l){function a(){var a=p.getPath(),g={},h=f(a,g,g),m=b.history.state;if(null!=m)for(var t in m)g[t]=m[t];for(var q in d)if(m=new RegExp("^"+q.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),m.test(h)){h.replace(m,function(){for(var b=q.match(/:[^\/]+/g)||[],f=[].slice.call(arguments,
1,-2),h=0;h<b.length;h++)g[b[h].replace(/:|\./g,"")]=decodeURIComponent(f[h]);n(d[q],g,a,q)});return}l(a,g)}h?b.onpopstate=g(a):"#"===p.prefix.charAt(0)&&(b.onhashchange=a);a()}};return p};A.route=function(b,d){var g=W(b),f=function(b){return b},h,m,n,p,t,q=function(b,a,q){if(null==b)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");var l=function(){null!=h&&d.render(b,h(y(m,n.key,n)))},u=function(b){if(b!==a)g.setPath(a,null,{replace:!0});else throw Error("Could not resolve default route "+
a);};g.defineRoutes(q,function(a,b,d){var g=t=function(a,q){g===t&&(m=null==q||"function"!==typeof q.view&&"function"!==typeof q?"div":q,n=b,p=d,t=null,h=(a.render||f).bind(a),l())};a.view||"function"===typeof a?g({},a):a.onmatch?V.resolve(a.onmatch(b,d)).then(function(b){g(a,b)},u):g(a,"div")},u);d.subscribe(b,l)};q.set=function(b,a,d){null!=t&&(d=d||{},d.replace=!0);t=null;g.setPath(b,a,d)};q.get=function(){return p};q.prefix=function(b){g.prefix=b};q.link=function(b){b.dom.setAttribute("href",
g.prefix+b.attrs.href);b.dom.onclick=function(a){a.ctrlKey||a.metaKey||a.shiftKey||2===a.which||(a.preventDefault(),a.redraw=!1,a=this.getAttribute("href"),0===a.indexOf(g.prefix)&&(a=a.slice(g.prefix.length)),q.set(a,void 0,void 0))}};q.param=function(b){return"undefined"!==typeof n&&"undefined"!==typeof b?n[b]:n};return q}(window,F);A.withAttr=function(b,d,g){return function(f){d.call(g||this,b in f.currentTarget?f.currentTarget[b]:f.currentTarget.getAttribute(b))}};var X=Q(window);A.render=X.render;
A.redraw=F.redraw;A.request=L.request;A.jsonp=L.jsonp;A.parseQueryString=M;A.buildQueryString=H;A.version="1.1.6";A.vnode=y;"undefined"!==typeof module?module.exports=A:window.m=A})();